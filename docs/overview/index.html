<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-overview" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Overview | Eik</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://eik.dev/docs/overview"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Overview | Eik"><meta data-rh="true" name="description" content="Eik consist of 3 main parts. First of all Eik is an asset server for serving ECMA Script Modules (ESM) and CSS assets. Secondly, Eik is a client for easy upload and management of your assets to an Eik server. The third part is a set of utilities that can be used to align module dependencies to the same version."><meta data-rh="true" property="og:description" content="Eik consist of 3 main parts. First of all Eik is an asset server for serving ECMA Script Modules (ESM) and CSS assets. Secondly, Eik is a client for easy upload and management of your assets to an Eik server. The third part is a set of utilities that can be used to align module dependencies to the same version."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://eik.dev/docs/overview"><link data-rh="true" rel="alternate" href="https://eik.dev/docs/overview" hreflang="en"><link data-rh="true" rel="alternate" href="https://eik.dev/docs/overview" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.20fc3ef2.css">
<script src="/assets/js/runtime~main.277baef8.js" defer="defer"></script>
<script src="/assets/js/main.0b63c28d.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Eik Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Eik Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Eik</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/overview">Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/eik-lib" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/overview">Overview</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/overview_concepts">Concepts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/overview_workflow">Workflow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/overview_eik_json">The eik.json File</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/mapping_import_map">Mapping</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/client_installation">Client</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/server">Server</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/ci">CI Setup</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Overview</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Overview</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Overview</h1></header><p>Eik consist of 3 main parts. First of all Eik is an <a href="/docs/server">asset server</a> for serving <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules" target="_blank" rel="noopener noreferrer">ECMA Script Modules (ESM)</a> and CSS assets. Secondly, Eik is a <a href="/docs/client">client</a> for easy upload and management of your assets to an Eik server. The third part is a set of utilities that can be used to align module dependencies to the same version.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<p>To understand Eik we need to understand what we are trying to achieve so lets start with a fairly common issue:</p>
<p>In a moderate or large sized web site it is very common that the site is built and served as <a href="https://martinfowler.com/articles/microservices.html" target="_blank" rel="noopener noreferrer">multiple applications</a> which live at different pathnames on the site. It&#x27;s also common for each of these applications to have a dedicated team of developers with the goal of being as autonomous as possible. To achieve this, each application and team should depend on each other as little as possible.</p>
<p><img decoding="async" loading="lazy" alt="User flow" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NjMuMzUzMTUiIGhlaWdodD0iMzE0LjQ2NjE2IiB2aWV3Qm94PSIwIDAgMjAxLjk3MDUyIDgzLjIwMjUwNyI+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTNlLTcuMDAwMDFoMjAxLjk3MDUydjgzLjIwMjUwN0gzZS03eiIvPjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjUxIiBzdHJva2Utd2lkdGg9Ii41MjkxNjY3IiBkPSJNNC4yMzMzMzM4IDkuNDk2NTdoNDcuNDcyNjAzdjY5LjQ3MjYwM0g0LjIzMzMzMzh6Ii8+PHBhdGggZmlsbD0iI2RlYWE4NyIgZD0iTTUuODE0ODM4OCAxMS40MzQzNWg0NC4wMzE0ODd2OC4zMzU4MTA3SDUuODE0ODM4OHpNNS44MTQ4Mzg4IDcyLjg2MDExaDQ0LjAzMTQ4N3Y0LjUzOTc3NDRINS44MTQ4Mzg4eiIvPjxwYXRoIGZpbGw9IiNlOWRkYWYiIGQ9Ik01LjgxNDgzODggMjAuODI4ODJoMTQuNDU5MzE2djUxLjA1NjkyN0g1LjgxNDgzODh6Ii8+PHBhdGggZmlsbD0iI2RkZTlhZiIgZD0iTTIxLjUxMjg5NjggMjAuODI4ODJoMjguMzMzNDI2djMxLjE1NjUwMmgtMjguMzMzNDI2eiIvPjxwYXRoIGZpbGw9IiNkYmUzZTIiIGQ9Ik0yMS41MTI4OTY4IDUzLjE3NDMxaDI4LjMzMzQyNnYxOC43MTE0MzdoLTI4LjMzMzQyNnoiLz48dGV4dCB4PSI5Ljg4Mjk5MjciIHk9IjE3NS4wMzgwMSIgc3Ryb2tlLXdpZHRoPSIuMjY0NTgzMzIiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEwLjU4MzMzMzAyIiBmb250LXdlaWdodD0iNDAwIiBsZXR0ZXItc3BhY2luZz0iMCIgc3R5bGU9ImxpbmUtaGVpZ2h0OjEuMjUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC02LjAzMTI1MDIgLTE2Ny44NDY0KSIgd29yZC1zcGFjaW5nPSIwIj48dHNwYW4geD0iOS44ODI5OTI3IiB5PSIxNzUuMDM4MDEiIGZvbnQtc2l6ZT0iNC4yMzMzMzM1OSI+c2l0ZS5jb208L3RzcGFuPjwvdGV4dD48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSI1MSIgc3Ryb2tlLXdpZHRoPSIuNTI5MTY2NzYiIGQ9Ik03Ny4yNjQ1ODY4IDkuNDk2NTRoNDcuNDcyNjAzdjY5LjQ3MjYwM2gtNDcuNDcyNjAzeiIvPjxwYXRoIGZpbGw9IiNkZWFhODciIGQ9Ik03OC44NDYwOTk4IDExLjQzNDMyaDQ0LjAzMTQ4N3Y4LjMzNTgxMDdoLTQ0LjAzMTQ4N3pNNzguODQ2MDk5OCA3Mi44NjAwOGg0NC4wMzE0ODd2NC41Mzk3NzQ0aC00NC4wMzE0ODd6Ii8+PHBhdGggZmlsbD0iI2U5ZGRhZiIgZD0iTTc4Ljg0NjA5OTggMjAuODI4NzloMTQuNDU5MzE2djMwLjk3NDcwN2gtMTQuNDU5MzE2eiIvPjxwYXRoIGZpbGw9IiNkZGU5YWYiIGQ9Ik05NC41NDQxNDk4IDIwLjgyODc5aDI4LjMzMzQyN3YyMC40NjA1MzVoLTI4LjMzMzQyN3oiLz48cGF0aCBmaWxsPSIjZGJlM2UyIiBkPSJNNzguOTAwMzkwOCA1My4xNzQyOWg0My45NzcxODh2MTguNzExNDM3aC00My45NzcxODh6Ii8+PHBhdGggZmlsbD0iI2UyZGJlMyIgZD0iTTk0Ljc0MzM4OTggNDIuNDI4MTVoMjcuOTQwNDgzdjkuMjQwNzMzMWgtMjcuOTQwNDgzeiIvPjx0ZXh0IHg9IjgzLjEwNDgxMyIgeT0iMTc1LjAzMTQ5IiBzdHJva2Utd2lkdGg9Ii4yNjQ1ODMzMiIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTAuNTgzMzMzMDIiIGZvbnQtd2VpZ2h0PSI0MDAiIGxldHRlci1zcGFjaW5nPSIwIiBzdHlsZT0ibGluZS1oZWlnaHQ6MS4yNSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTYuMDMxMjUwMiAtMTY3Ljg0NjQpIiB3b3JkLXNwYWNpbmc9IjAiPjx0c3BhbiB4PSI4My4xMDQ4MTMiIHk9IjE3NS4wMzE0OSIgZm9udC1zaXplPSI0LjIzMzMzMzU5Ij5zaXRlLmNvbS9zaG9wPC90c3Bhbj48L3RleHQ+PHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iNTEiIHN0cm9rZS13aWR0aD0iLjUyOTE2Njc2IiBkPSJNMTUwLjI2NDU4OTggOS40OTY1N2g0Ny40NzI2MDN2NjkuNDcyNjAzaC00Ny40NzI2MDN6Ii8+PHBhdGggZmlsbD0iI2RlYWE4NyIgZD0iTTE1MS44NDYwNzk4IDExLjQzNDM1aDQ0LjAzMTQ4N3Y4LjMzNTgxMDdoLTQ0LjAzMTQ4N3pNMTUxLjg0NjA3OTggNzIuODYwMWg0NC4wMzE0ODd2NC41Mzk3NzQ0aC00NC4wMzE0ODd6Ii8+PHBhdGggZmlsbD0iI2RkZTlhZiIgZD0iTTE1Mi4wNDU4OTk4IDIwLjgyODgyaDQzLjgzMTY2NXYzMS4xNTY1MDJoLTQzLjgzMTY2NXoiLz48cGF0aCBmaWxsPSIjZTJkYmUzIiBkPSJNMTUyLjE5MTQzOTggNTMuMTc0MzFoNDMuNjg2MTQydjE4LjcxMTQzN2gtNDMuNjg2MTQyeiIvPjx0ZXh0IHg9IjE1Ni4wMzIwMyIgeT0iMTc1LjE3NzA1IiBzdHJva2Utd2lkdGg9Ii4yNjQ1ODMzMiIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTAuNTgzMzMzMDIiIGZvbnQtd2VpZ2h0PSI0MDAiIGxldHRlci1zcGFjaW5nPSIwIiBzdHlsZT0ibGluZS1oZWlnaHQ6MS4yNSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTYuMDMxMjUwMiAtMTY3Ljg0NjQpIiB3b3JkLXNwYWNpbmc9IjAiPjx0c3BhbiB4PSIxNTYuMDMyMDMiIHk9IjE3NS4xNzcwNSIgZm9udC1zaXplPSI0LjIzMzMzMzU5Ij5zaXRlLmNvbS9jaGVja291dDwvdHNwYW4+PC90ZXh0PjxwYXRoIGZpbGw9IiM5OTkiIGQ9Ik03NC4xNjI4MTY4IDQyLjAwNzY1bC03Ljg4NzM2MS00LjUzODcydjMuNTgzMjRoLTEyLjU5NDM0MlY0Mi45MThoMTIuNTk0MzQydjMuNjA0NDR6TTE0Ny42ODAyNjk4IDQyLjAwNzY1bC03Ljg4NzM2LTQuNTM4NzJ2My41ODMyNGgtMTIuNTk0MzRWNDIuOTE4aDEyLjU5NDM0djMuNjA0NDR6Ii8+PC9zdmc+" width="763" height="314" class="img_ev3q"></p>
<p>Lets say we have a site where the front page (<code>site.com</code>) is one application. Then we have a web shop, a second application, on <code>site.com/shop</code> and finally there is a third application handling checkout on <code>site.com/checkout</code>. A user will normally arrive at the front page, move to browsing the shop and then finish at the checkout.</p>
<p>Let&#x27;s also say that all of these applications are using <a href="https://lit-html.polymer-project.org/" target="_blank" rel="noopener noreferrer">lit-html</a> for templating in the browser. We then have different applications depending on the same library that we want to be developed and deployed to production autonomously. Problems can arise when some of these application start to depend on different versions of the same library.</p>
<p><img decoding="async" loading="lazy" alt="Non-optimised loading of assets" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NjMuMzUzMTUiIGhlaWdodD0iMzUxLjI1MDAzIiB2aWV3Qm94PSIwIDAgMjAxLjk3MDUyIDkyLjkzNDkwNyI+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTS0yZS03LjAwMDAxaDIwMS45NzA1MnY5Mi45MzQ5MDZILTJlLTd6Ii8+PHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iNTEiIHN0cm9rZS13aWR0aD0iLjUyOTE2NjciIGQ9Ik00LjIzMzMzMzggOS40OTY1N2g0Ny40NzI2MDN2NjkuNDcyNjAzSDQuMjMzMzMzOHoiLz48cGF0aCBmaWxsPSIjZGVhYTg3IiBkPSJNNS44MTQ4Mzg4IDExLjQzNDM1aDQ0LjAzMTQ4N3Y4LjMzNTgxMDdINS44MTQ4Mzg4ek01LjgxNDgzODggNzIuODYwMTFoNDQuMDMxNDg3djQuNTM5Nzc0NEg1LjgxNDgzODh6Ii8+PHBhdGggZmlsbD0iI2U5ZGRhZiIgZD0iTTUuODE0ODM4OCAyMC44Mjg4MmgxNC40NTkzMTZ2NTEuMDU2OTI3SDUuODE0ODM4OHoiLz48cGF0aCBmaWxsPSIjZGRlOWFmIiBkPSJNMjEuNTEyODk2OCAyMC44Mjg4MmgyOC4zMzM0MjZ2MzEuMTU2NTAyaC0yOC4zMzM0MjZ6Ii8+PHBhdGggZmlsbD0iI2RiZTNlMiIgZD0iTTIxLjUxMjg5NjggNTMuMTc0MzFoMjguMzMzNDI2djE4LjcxMTQzN2gtMjguMzMzNDI2eiIvPjxwYXRoIHN0cm9rZT0iIzAzMDAwMCIgc3Ryb2tlLXdpZHRoPSIuNTI5MTY2NyIgZD0iTTUuODE0ODM4OCA4MC44OTkwOXY4LjA2NzA3TTUuODY1NjI5OCA4Ni4xMzkyNGgxLjg0Nzc3Ii8+PHRleHQgeD0iMTQuNDc0MDMyIiB5PSIyNTUuMjEyNjgiIHN0cm9rZS13aWR0aD0iLjI2NDU4MzMyIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMC41ODMzMzMwMiIgZm9udC13ZWlnaHQ9IjQwMCIgbGV0dGVyLXNwYWNpbmc9IjAiIHN0eWxlPSJsaW5lLWhlaWdodDoxLjI1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNi4wMzEyNTAyIC0xNjcuODQ2NCkiIHdvcmQtc3BhY2luZz0iMCI+PHRzcGFuIHg9IjE0LjQ3NDAzMiIgeT0iMjU1LjIxMjY4IiBmb250LXNpemU9IjMuNTI3Nzc3NzgiPi8xLjIuMC9saXQtaHRtbC5qcyA8dHNwYW4gZmlsbD0icmVkIj4oZmV0Y2hlZCk8L3RzcGFuPjwvdHNwYW4+PC90ZXh0Pjx0ZXh0IHg9IjkuODgyOTkyNyIgeT0iMTc1LjAzODAxIiBzdHJva2Utd2lkdGg9Ii4yNjQ1ODMzMiIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTAuNTgzMzMzMDIiIGZvbnQtd2VpZ2h0PSI0MDAiIGxldHRlci1zcGFjaW5nPSIwIiBzdHlsZT0ibGluZS1oZWlnaHQ6MS4yNSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTYuMDMxMjUwMiAtMTY3Ljg0NjQpIiB3b3JkLXNwYWNpbmc9IjAiPjx0c3BhbiB4PSI5Ljg4Mjk5MjciIHk9IjE3NS4wMzgwMSIgZm9udC1zaXplPSI0LjIzMzMzMzU5Ij5zaXRlLmNvbTwvdHNwYW4+PC90ZXh0PjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjUxIiBzdHJva2Utd2lkdGg9Ii41MjkxNjY3NiIgZD0iTTc3LjI2NDU4NjggOS40OTY1NGg0Ny40NzI2MDN2NjkuNDcyNjAzaC00Ny40NzI2MDN6Ii8+PHBhdGggZmlsbD0iI2RlYWE4NyIgZD0iTTc4Ljg0NjA5OTggMTEuNDM0MzJoNDQuMDMxNDg3djguMzM1ODEwN2gtNDQuMDMxNDg3ek03OC44NDYwOTk4IDcyLjg2MDA4aDQ0LjAzMTQ4N3Y0LjUzOTc3NDRoLTQ0LjAzMTQ4N3oiLz48cGF0aCBmaWxsPSIjZTlkZGFmIiBkPSJNNzguODQ2MDk5OCAyMC44Mjg3OWgxNC40NTkzMTZ2MzAuOTc0NzA3aC0xNC40NTkzMTZ6Ii8+PHBhdGggZmlsbD0iI2RkZTlhZiIgZD0iTTk0LjU0NDE0OTggMjAuODI4NzloMjguMzMzNDI3djIwLjQ2MDUzNWgtMjguMzMzNDI3eiIvPjxwYXRoIGZpbGw9IiNkYmUzZTIiIGQ9Ik03OC45MDAzOTA4IDUzLjE3NDI5aDQzLjk3NzE4OHYxOC43MTE0MzdoLTQzLjk3NzE4OHoiLz48cGF0aCBmaWxsPSIjOTk5IiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iLjUyOTE2NjciIGQ9Ik03OC44NDYwOTM4IDgwLjg5OTA4djguMDY3MDgiLz48cGF0aCBmaWxsPSIjOTk5IiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iLjUyOTE2Njc2IiBkPSJNNzguODk2ODg0OCA4Ni4xMzkyM2gxLjg0Nzc3Ii8+PHRleHQgeD0iODcuNTA1Mjg3IiB5PSIyNTUuMjEyNjYiIHN0cm9rZS13aWR0aD0iLjI2NDU4MzMyIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMC41ODMzMzMwMiIgZm9udC13ZWlnaHQ9IjQwMCIgbGV0dGVyLXNwYWNpbmc9IjAiIHN0eWxlPSJsaW5lLWhlaWdodDoxLjI1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNi4wMzEyNTAyIC0xNjcuODQ2NCkiIHdvcmQtc3BhY2luZz0iMCI+PHRzcGFuIHg9Ijg3LjUwNTI4NyIgeT0iMjU1LjIxMjY2IiBmb250LXNpemU9IjMuNTI3Nzc3NzgiPi8xLjEuMS9saXQtaHRtbC5qcyA8dHNwYW4gZmlsbD0icmVkIj4oZmV0Y2hlZCk8L3RzcGFuPjwvdHNwYW4+PC90ZXh0PjxwYXRoIGZpbGw9IiNlMmRiZTMiIGQ9Ik05NC43NDMzODk4IDQyLjQyODE1aDI3Ljk0MDQ4M3Y5LjI0MDczMzFoLTI3Ljk0MDQ4M3oiLz48dGV4dCB4PSI4My4xMDQ4MTMiIHk9IjE3NS4wMzE0OSIgc3Ryb2tlLXdpZHRoPSIuMjY0NTgzMzIiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEwLjU4MzMzMzAyIiBmb250LXdlaWdodD0iNDAwIiBsZXR0ZXItc3BhY2luZz0iMCIgc3R5bGU9ImxpbmUtaGVpZ2h0OjEuMjUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC02LjAzMTI1MDIgLTE2Ny44NDY0KSIgd29yZC1zcGFjaW5nPSIwIj48dHNwYW4geD0iODMuMTA0ODEzIiB5PSIxNzUuMDMxNDkiIGZvbnQtc2l6ZT0iNC4yMzMzMzM1OSI+c2l0ZS5jb20vc2hvcDwvdHNwYW4+PC90ZXh0PjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjUxIiBzdHJva2Utd2lkdGg9Ii41MjkxNjY3NiIgZD0iTTE1MC4yNjQ1ODk4IDkuNDk2NTdoNDcuNDcyNjAzdjY5LjQ3MjYwM2gtNDcuNDcyNjAzeiIvPjxwYXRoIGZpbGw9IiNkZWFhODciIGQ9Ik0xNTEuODQ2MDc5OCAxMS40MzQzNWg0NC4wMzE0ODd2OC4zMzU4MTA3aC00NC4wMzE0ODd6TTE1MS44NDYwNzk4IDcyLjg2MDFoNDQuMDMxNDg3djQuNTM5Nzc0NGgtNDQuMDMxNDg3eiIvPjxwYXRoIGZpbGw9IiNkZGU5YWYiIGQ9Ik0xNTIuMDQ1ODk5OCAyMC44Mjg4Mmg0My44MzE2NjV2MzEuMTU2NTAyaC00My44MzE2NjV6Ii8+PHBhdGggZmlsbD0iI2UyZGJlMyIgZD0iTTE1Mi4xOTE0Mzk4IDUzLjE3NDMxaDQzLjY4NjE0MnYxOC43MTE0MzdoLTQzLjY4NjE0MnoiLz48cGF0aCBmaWxsPSIjOTk5IiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iLjUyOTE2NjciIGQ9Ik0xNTEuODQ2MDg5OCA4MC44OTkwOXY4LjA2NzA3Ii8+PHBhdGggZmlsbD0iIzk5OSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9Ii41MjkxNjY3NiIgZD0iTTE1MS44OTY4ODk4IDg2LjEzOTI0aDEuODQ3NzciLz48dGV4dCB4PSIxNjAuNTA1MjgiIHk9IjI1NS4yMTI2OCIgc3Ryb2tlLXdpZHRoPSIuMjY0NTgzMzIiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEwLjU4MzMzMzAyIiBmb250LXdlaWdodD0iNDAwIiBsZXR0ZXItc3BhY2luZz0iMCIgc3R5bGU9ImxpbmUtaGVpZ2h0OjEuMjUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC02LjAzMTI1MDIgLTE2Ny44NDY0KSIgd29yZC1zcGFjaW5nPSIwIj48dHNwYW4geD0iMTYwLjUwNTI4IiB5PSIyNTUuMjEyNjgiIGZvbnQtc2l6ZT0iMy41Mjc3Nzc3OCI+LzEuMS4yL2xpdC1odG1sLmpzIDx0c3BhbiBmaWxsPSJyZWQiPihmZXRjaGVkKTwvdHNwYW4+PC90c3Bhbj48L3RleHQ+PHRleHQgeD0iMTU2LjAzMjAzIiB5PSIxNzUuMTc3MDUiIHN0cm9rZS13aWR0aD0iLjI2NDU4MzMyIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMC41ODMzMzMwMiIgZm9udC13ZWlnaHQ9IjQwMCIgbGV0dGVyLXNwYWNpbmc9IjAiIHN0eWxlPSJsaW5lLWhlaWdodDoxLjI1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNi4wMzEyNTAyIC0xNjcuODQ2NCkiIHdvcmQtc3BhY2luZz0iMCI+PHRzcGFuIHg9IjE1Ni4wMzIwMyIgeT0iMTc1LjE3NzA1IiBmb250LXNpemU9IjQuMjMzMzMzNTkiPnNpdGUuY29tL2NoZWNrb3V0PC90c3Bhbj48L3RleHQ+PHBhdGggZmlsbD0iIzk5OSIgZD0iTTc0LjE2MjgxNjggNDIuMDA3NjVsLTcuODg3MzYxLTQuNTM4NzJ2My41ODMyNGgtMTIuNTk0MzQyVjQyLjkxOGgxMi41OTQzNDJ2My42MDQ0NHpNMTQ3LjY4MDI2OTggNDIuMDA3NjVsLTcuODg3MzYtNC41Mzg3MnYzLjU4MzI0aC0xMi41OTQzNFY0Mi45MThoMTIuNTk0MzR2My42MDQ0NHoiLz48L3N2Zz4=" width="763" height="351" class="img_ev3q"></p>
<p>Our challenge is to avoid the end user having to end up downloading different versions of the same library as they move between the different applications on our site. We want to maximize end user performance by downloading lit-html once and not having to download one specific version when accessing <code>site.com</code> (eg. v1.2.0) and then downloading another specific version (eg. v1.1.1) when moving to <code>site.com/shop</code> and finally ending up with perhaps having to download yet another version (eg. v1.1.2) when they check out at <code>site.com/checkout</code>.</p>
<p><img decoding="async" loading="lazy" alt="Optimised loading of assets" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NjMuMzUzMTUiIGhlaWdodD0iMzUxLjI1MDAzIiB2aWV3Qm94PSIwIDAgMjAxLjk3MDUyIDkyLjkzNDkwNyI+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTS0yZS03LjAwMDAxaDIwMS45NzA1MnY5Mi45MzQ5MDZILTJlLTd6Ii8+PHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iNTEiIHN0cm9rZS13aWR0aD0iLjUyOTE2NjciIGQ9Ik00LjIzMzMzMzggOS40OTY1N2g0Ny40NzI2MDN2NjkuNDcyNjAzSDQuMjMzMzMzOHoiLz48cGF0aCBmaWxsPSIjZGVhYTg3IiBkPSJNNS44MTQ4Mzg4IDExLjQzNDM1aDQ0LjAzMTQ4N3Y4LjMzNTgxMDdINS44MTQ4Mzg4ek01LjgxNDgzODggNzIuODYwMTFoNDQuMDMxNDg3djQuNTM5Nzc0NEg1LjgxNDgzODh6Ii8+PHBhdGggZmlsbD0iI2U5ZGRhZiIgZD0iTTUuODE0ODM4OCAyMC44Mjg4MmgxNC40NTkzMTZ2NTEuMDU2OTI3SDUuODE0ODM4OHoiLz48cGF0aCBmaWxsPSIjZGRlOWFmIiBkPSJNMjEuNTEyODk2OCAyMC44Mjg4MmgyOC4zMzM0MjZ2MzEuMTU2NTAyaC0yOC4zMzM0MjZ6Ii8+PHBhdGggZmlsbD0iI2RiZTNlMiIgZD0iTTIxLjUxMjg5NjggNTMuMTc0MzFoMjguMzMzNDI2djE4LjcxMTQzN2gtMjguMzMzNDI2eiIvPjxwYXRoIHN0cm9rZT0iIzAzMDAwMCIgc3Ryb2tlLXdpZHRoPSIuNTI5MTY2NyIgZD0iTTUuODE0ODM4OCA4MC44OTkwOXY4LjA2NzA3TTUuODY1NjI5OCA4Ni4xMzkyNGgxLjg0Nzc3Ii8+PHRleHQgeD0iMTQuNDc0MDMyIiB5PSIyNTUuMjEyNjgiIHN0cm9rZS13aWR0aD0iLjI2NDU4MzMyIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMC41ODMzMzMwMiIgZm9udC13ZWlnaHQ9IjQwMCIgbGV0dGVyLXNwYWNpbmc9IjAiIHN0eWxlPSJsaW5lLWhlaWdodDoxLjI1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNi4wMzEyNTAyIC0xNjcuODQ2NCkiIHdvcmQtc3BhY2luZz0iMCI+PHRzcGFuIHg9IjE0LjQ3NDAzMiIgeT0iMjU1LjIxMjY4IiBmb250LXNpemU9IjMuNTI3Nzc3NjciPi92MS9saXQtaHRtbC5qcyA8dHNwYW4gZmlsbD0icmVkIj4oZmV0Y2hlZCk8L3RzcGFuPjwvdHNwYW4+PC90ZXh0Pjx0ZXh0IHg9IjkuODgyOTkyNyIgeT0iMTc1LjAzODAxIiBzdHJva2Utd2lkdGg9Ii4yNjQ1ODMzMiIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTAuNTgzMzMzMDIiIGZvbnQtd2VpZ2h0PSI0MDAiIGxldHRlci1zcGFjaW5nPSIwIiBzdHlsZT0ibGluZS1oZWlnaHQ6MS4yNSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTYuMDMxMjUwMiAtMTY3Ljg0NjQpIiB3b3JkLXNwYWNpbmc9IjAiPjx0c3BhbiB4PSI5Ljg4Mjk5MjciIHk9IjE3NS4wMzgwMSIgZm9udC1zaXplPSI0LjIzMzMzMzU5Ij5zaXRlLmNvbTwvdHNwYW4+PC90ZXh0PjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjUxIiBzdHJva2Utd2lkdGg9Ii41MjkxNjY3NiIgZD0iTTc3LjI2NDU4NjggOS40OTY1NGg0Ny40NzI2MDN2NjkuNDcyNjAzaC00Ny40NzI2MDN6Ii8+PHBhdGggZmlsbD0iI2RlYWE4NyIgZD0iTTc4Ljg0NjA5OTggMTEuNDM0MzJoNDQuMDMxNDg3djguMzM1ODEwN2gtNDQuMDMxNDg3ek03OC44NDYwOTk4IDcyLjg2MDA4aDQ0LjAzMTQ4N3Y0LjUzOTc3NDRoLTQ0LjAzMTQ4N3oiLz48cGF0aCBmaWxsPSIjZTlkZGFmIiBkPSJNNzguODQ2MDk5OCAyMC44Mjg3OWgxNC40NTkzMTZ2MzAuOTc0NzA3aC0xNC40NTkzMTZ6Ii8+PHBhdGggZmlsbD0iI2RkZTlhZiIgZD0iTTk0LjU0NDE0OTggMjAuODI4NzloMjguMzMzNDI3djIwLjQ2MDUzNWgtMjguMzMzNDI3eiIvPjxwYXRoIGZpbGw9IiNkYmUzZTIiIGQ9Ik03OC45MDAzOTA4IDUzLjE3NDI5aDQzLjk3NzE4OHYxOC43MTE0MzdoLTQzLjk3NzE4OHoiLz48cGF0aCBmaWxsPSIjOTk5IiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iLjUyOTE2NjciIGQ9Ik03OC44NDYwOTM4IDgwLjg5OTA4djguMDY3MDgiLz48cGF0aCBmaWxsPSIjOTk5IiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iLjUyOTE2Njc2IiBkPSJNNzguODk2ODg0OCA4Ni4xMzkyM2gxLjg0Nzc3Ii8+PHRleHQgeD0iODcuNTA1Mjg3IiB5PSIyNTUuMjEyNjYiIHN0cm9rZS13aWR0aD0iLjI2NDU4MzMyIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMC41ODMzMzMwMiIgZm9udC13ZWlnaHQ9IjQwMCIgbGV0dGVyLXNwYWNpbmc9IjAiIHN0eWxlPSJsaW5lLWhlaWdodDoxLjI1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNi4wMzEyNTAyIC0xNjcuODQ2NCkiIHdvcmQtc3BhY2luZz0iMCI+PHRzcGFuIHg9Ijg3LjUwNTI4NyIgeT0iMjU1LjIxMjY2IiBmb250LXNpemU9IjMuNTI3Nzc3NjciPi92MS9saXQtaHRtbC5qcyA8dHNwYW4gZmlsbD0iZ3JlZW4iPihjYWNoZWQpPC90c3Bhbj48L3RzcGFuPjwvdGV4dD48cGF0aCBmaWxsPSIjZTJkYmUzIiBkPSJNOTQuNzQzMzg5OCA0Mi40MjgxNWgyNy45NDA0ODN2OS4yNDA3MzMxaC0yNy45NDA0ODN6Ii8+PHRleHQgeD0iODMuMTA0ODEzIiB5PSIxNzUuMDMxNDkiIHN0cm9rZS13aWR0aD0iLjI2NDU4MzMyIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMC41ODMzMzMwMiIgZm9udC13ZWlnaHQ9IjQwMCIgbGV0dGVyLXNwYWNpbmc9IjAiIHN0eWxlPSJsaW5lLWhlaWdodDoxLjI1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNi4wMzEyNTAyIC0xNjcuODQ2NCkiIHdvcmQtc3BhY2luZz0iMCI+PHRzcGFuIHg9IjgzLjEwNDgxMyIgeT0iMTc1LjAzMTQ5IiBmb250LXNpemU9IjQuMjMzMzMzNTkiPnNpdGUuY29tL3Nob3A8L3RzcGFuPjwvdGV4dD48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSI1MSIgc3Ryb2tlLXdpZHRoPSIuNTI5MTY2NzYiIGQ9Ik0xNTAuMjY0NTg5OCA5LjQ5NjU3aDQ3LjQ3MjYwM3Y2OS40NzI2MDNoLTQ3LjQ3MjYwM3oiLz48cGF0aCBmaWxsPSIjZGVhYTg3IiBkPSJNMTUxLjg0NjA3OTggMTEuNDM0MzVoNDQuMDMxNDg3djguMzM1ODEwN2gtNDQuMDMxNDg3ek0xNTEuODQ2MDc5OCA3Mi44NjAxaDQ0LjAzMTQ4N3Y0LjUzOTc3NDRoLTQ0LjAzMTQ4N3oiLz48cGF0aCBmaWxsPSIjZGRlOWFmIiBkPSJNMTUyLjA0NTg5OTggMjAuODI4ODJoNDMuODMxNjY1djMxLjE1NjUwMmgtNDMuODMxNjY1eiIvPjxwYXRoIGZpbGw9IiNlMmRiZTMiIGQ9Ik0xNTIuMTkxNDM5OCA1My4xNzQzMWg0My42ODYxNDJ2MTguNzExNDM3aC00My42ODYxNDJ6Ii8+PHBhdGggZmlsbD0iIzk5OSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9Ii41MjkxNjY3IiBkPSJNMTUxLjg0NjA4OTggODAuODk5MDl2OC4wNjcwNyIvPjxwYXRoIGZpbGw9IiM5OTkiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIuNTI5MTY2NzYiIGQ9Ik0xNTEuODk2ODg5OCA4Ni4xMzkyNGgxLjg0Nzc3Ii8+PHRleHQgeD0iMTYwLjUwNTI4IiB5PSIyNTUuMjEyNjgiIHN0cm9rZS13aWR0aD0iLjI2NDU4MzMyIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMC41ODMzMzMwMiIgZm9udC13ZWlnaHQ9IjQwMCIgbGV0dGVyLXNwYWNpbmc9IjAiIHN0eWxlPSJsaW5lLWhlaWdodDoxLjI1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNi4wMzEyNTAyIC0xNjcuODQ2NCkiIHdvcmQtc3BhY2luZz0iMCI+PHRzcGFuIHg9IjE2MC41MDUyOCIgeT0iMjU1LjIxMjY4IiBmb250LXNpemU9IjMuNTI3Nzc3NjciPi92MS9saXQtaHRtbC5qcyA8dHNwYW4gZmlsbD0iZ3JlZW4iPihjYWNoZWQpPC90c3Bhbj48L3RzcGFuPjwvdGV4dD48dGV4dCB4PSIxNTYuMDMyMDMiIHk9IjE3NS4xNzcwNSIgc3Ryb2tlLXdpZHRoPSIuMjY0NTgzMzIiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEwLjU4MzMzMzAyIiBmb250LXdlaWdodD0iNDAwIiBsZXR0ZXItc3BhY2luZz0iMCIgc3R5bGU9ImxpbmUtaGVpZ2h0OjEuMjUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC02LjAzMTI1MDIgLTE2Ny44NDY0KSIgd29yZC1zcGFjaW5nPSIwIj48dHNwYW4geD0iMTU2LjAzMjAzIiB5PSIxNzUuMTc3MDUiIGZvbnQtc2l6ZT0iNC4yMzMzMzM1OSI+c2l0ZS5jb20vY2hlY2tvdXQ8L3RzcGFuPjwvdGV4dD48cGF0aCBmaWxsPSIjOTk5IiBkPSJNNzQuMTYyODE2OCA0Mi4wMDc2NWwtNy44ODczNjEtNC41Mzg3MnYzLjU4MzI0aC0xMi41OTQzNDJWNDIuOTE4aDEyLjU5NDM0MnYzLjYwNDQ0ek0xNDcuNjgwMjY5OCA0Mi4wMDc2NWwtNy44ODczNi00LjUzODcydjMuNTgzMjRoLTEyLjU5NDM0VjQyLjkxOGgxMi41OTQzNHYzLjYwNDQ0eiIvPjwvc3ZnPg==" width="763" height="351" class="img_ev3q"></p>
<p>The Eik solution is to make all applications point to the same version of the same library in production despite that the applications are developed using different patch or minor version. If the library then has appropriate HTTP cache headers, the browser will do the rest and make sure the library is loaded over the wire only once during the user&#x27;s visit to our site.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-eik-works">How Eik works<a href="#how-eik-works" class="hash-link" aria-label="Direct link to How Eik works" title="Direct link to How Eik works">​</a></h2>
<p>The main role of the Eik server is to serve static assets uploaded to the server. Upon upload, assets will be given a new versioned pathname for each upload and are considered immutable. A change in an asset is a new version on the Eik server. By doing so, served assets can be cached forever in the end users browser.</p>
<p>The Eik server also has the concept called an alias. An alias is a non immutable pathname which can be set to redirect requests to it, to an immutable asset pathname.</p>
<p>For example, let us say that we upload lit-html version 1.1.1 to an Eik server. This version of lit-html will then live on the immutable URL <code>/npm/lit-html/1.1.1</code>. We can then set an alias for lit-html and this alias will be on the non immutable pathname <code>/npm/lit-html/v1</code>. Any request to any file under the alias at <code>/npm/lit-html/v1</code> will then be redirected to the matching file under <code>/npm/lit-html/1.1.1</code>.</p>
<p>Later on, when we publish lit-html version 1.2.0 to the Eik server, this version will then live on the immutable pathname <code>/npm/lit-html/1.2.0</code>. We can then update the existing alias at the non immutable pathname <code>/npm/lit-html/v1</code> to point to the new version. Requests to any file under the alias at <code>/npm/lit-html/v1</code> will then be redirected to its matching file under <code>/npm/lit-html/1.2.0</code>.</p>
<p>In order to meet the challenge outlined in the introduction above, each of the applications described can load lit-html through its alias (<code>/npm/lit-html/v1</code>) and they will all load the same version. The alias acts as a static path to a shared library (in this case lit-html) across all the applications. It&#x27;s then possible to publish new versions of a library without having to rebuild and redeploy each application to production.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="esm-imports">ESM imports<a href="#esm-imports" class="hash-link" aria-label="Direct link to ESM imports" title="Direct link to ESM imports">​</a></h2>
<p>Before we proceed, we should go over some ESM import statement basics.</p>
<p>ESM import statements can be relative. A relative ESM import statement must start with either <code>/</code>, <code>./</code> or <code>../</code>:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports operator" style="color:#393A34">*</span><span class="token imports"> </span><span class="token imports keyword module" style="color:#00009f">as</span><span class="token imports"> mymod</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/my_module.js&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports operator" style="color:#393A34">*</span><span class="token imports"> </span><span class="token imports keyword module" style="color:#00009f">as</span><span class="token imports"> mymod</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;./my_module.js&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports operator" style="color:#393A34">*</span><span class="token imports"> </span><span class="token imports keyword module" style="color:#00009f">as</span><span class="token imports"> mymod</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;../my_module.js&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ESM import statements can also be absolute in which case they must start with an HTTP protocol:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports operator" style="color:#393A34">*</span><span class="token imports"> </span><span class="token imports keyword module" style="color:#00009f">as</span><span class="token imports"> mylib</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;https://eik-server.com/pkg/mylib/v3/main.js&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Due to the prevalence of asset bundling, it&#x27;s very common to see ESM import statements which do not comply with any of the statements outlined above (note that <code>my_library</code> does not start with <code>/</code>, <code>./</code> or <code>../</code>):</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports operator" style="color:#393A34">*</span><span class="token imports"> </span><span class="token imports keyword module" style="color:#00009f">as</span><span class="token imports"> mylib</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;my_library&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>These type of statements are called &quot;bare imports&quot; and are not legal ESM import statements. A browser can not handle such an import statement. Bare import statements are commonly used when a module is installed through a package manager, such as NPM, and then transpiled through a build step to one of the legal ESM import statements before being served to the browser.</p>
<p>In Eik, we utilize bare imports to align modules (ex; the applications in our example) to the same version of modules it depends on (ex; lit-html in our example). Which brings us to Import Maps.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="import-maps">Import Maps<a href="#import-maps" class="hash-link" aria-label="Direct link to Import Maps" title="Direct link to Import Maps">​</a></h2>
<p><a href="https://github.com/WICG/import-maps" target="_blank" rel="noopener noreferrer">Import Maps</a> is fairly new and up and coming web standard. An Import Map is a simple object mapping between a bare import statement and a legal ESM import statement. The idea is that an Import Map should be used to map bare import statements to fully qualified import statements in ESM.</p>
<p>An Import Map looks something like this:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;my_library&quot;: &quot;https://eik-server.com/pkg/mylib/v3/main.js&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;lit-html&quot;: &quot;https://eik-server.com/npm/lit-html/v1/lit-html.js&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Eik has support for storing Import Maps under a dedicated namespace. Import Maps are versioned and immutable and can be aliased in the same way that assets can.</p>
<p>Eik&#x27;s mapping utils is used to apply Import Maps to assets during bundling.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mapping-it-together">Mapping it together<a href="#mapping-it-together" class="hash-link" aria-label="Direct link to Mapping it together" title="Direct link to Mapping it together">​</a></h2>
<p>In Eik, we use Import Maps and aliasing of assets to align the versions of libraries across multiple applications on a site while maintaining the possibility to develop and deploy each application to production separately.</p>
<p>Let&#x27;s go through this, keeping in mind the challenge we outlined in the introduction above.</p>
<p>We know that lit-html is a library that all our applications will be using so we want to align the version in use across all of them. To do so, we publish version 1.2.0 of lit-html to our Eik server after which time it will be available at <code>https://eik-server.com/npm/lit-html/1.2.0</code>.</p>
<p>To make the reference to lit-html more static over time we create an alias to point to version 1.2.0 and lit-html can be requested through <code>https://eik-server.com/npm/lit-html/v1</code>. As mentioned earlier, this give us the possibillity to update versions of lit-html without having to rebuild and redeploy each of our applications to production.</p>
<p>Next, we need to create a mapping between the bare import statement developers will use when developing the applications and the aliased URL of lit-html. We can do so by making an Import Map as follow:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;lit-html&quot;: &quot;/npm/lit-html/v1/lit-html.js&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Once created, we publish this Import Map to our Eik server and then create an alias for it. If we were to name the Import Map &quot;site-mapping&quot; and versioned it as 1.0.1 during the upload to the Eik server, it would then be available at the alias URL <code>https://eik-server.com/map/site-mapping/v1</code>.</p>
<p>In each application we can now depend on and install lit-html through NPM as is common practice. Each application can then locally reference lit-html through its bare import statement like so:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports">html</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> render</span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;lit-html&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In the build tool used by the applications we can now add the appropriate Eik mapping utility which will read a set of defined Import Maps (in our example, &quot;site-mapping&quot;) from the Eik server and apply these Import Maps to the application code. This will map our bare import statements into legal ESM import statements pointing to the lit-html alias defined in the Import Map:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports operator" style="color:#393A34">*</span><span class="token imports"> </span><span class="token imports keyword module" style="color:#00009f">as</span><span class="token imports"> lit</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/npm/lit-html/v1/lit-html.js&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now our application defines an ESM import statement that points to the alias for lit-html which makes sure multiple applications on our site align to the same version of lit-html. By doing this, we&#x27;re able to develop our application in isolation without depending or interfering with any other applications that utilize the same library.</p>
<p>The final step in this process is uploading the application code as a package to the Eik server. Which is done by the Eik client.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--next" href="/docs/overview_concepts"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Concepts</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#how-eik-works" class="table-of-contents__link toc-highlight">How Eik works</a></li><li><a href="#esm-imports" class="table-of-contents__link toc-highlight">ESM imports</a></li><li><a href="#import-maps" class="table-of-contents__link toc-highlight">Import Maps</a></li><li><a href="#mapping-it-together" class="table-of-contents__link toc-highlight">Mapping it together</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 - FINN.no.</div></div></div></footer></div>
</body>
</html>